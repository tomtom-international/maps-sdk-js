---
title: Traffic Flow Module
hideMenu: false
hideSubmenu: false
hasTwoColumns: false
titleTags:
- label: "VERSION 0.9.3"
  color: "grey5"
- label: "PRIVATE PREVIEW"
  color: "grey5"
---

# Traffic Flow Module Overview

Traffic flow provides real-time observed speeds and travel times for all key roads in a network, enabling users to make informed routing decisions based on current road conditions. The visual representation uses intuitive color coding where red indicates slow traffic, yellow represents moderate speeds, and green shows free-flowing traffic.

<img src="images/flow.png" alt="Traffic flow" style={{width: 500}} />

## Understanding Traffic Flow Data

Traffic flow visualization displays comprehensive real-time speed data across road networks, helping users understand current traffic conditions at a glance. The system continuously updates based on observed vehicle speeds and provides coverage for major transportation corridors including highways, arterials, and urban streets.

**Key Benefits:**
- **Real-time speed visualization** with color-coded indicators for instant traffic assessment
- **Comprehensive road coverage** including all major transportation networks
- **Historical context integration** to provide meaningful speed comparisons
- **Performance-optimized rendering** for smooth interaction across zoom levels

# Initializing the Traffic Flow Module

## Basic Setup

First set up your project and map following the [Map quickstart guide](/javascript/maps/documentation/guides/map/quickstart) and ensure you have a running [TomTomMap](/javascript/maps/documentation/api-reference/map-init.TomTomMap) instance.

### Automatic Traffic Flow Integration

For immediate traffic flow visualization, include `"trafficFlow"` in your map style configuration:

```javascript
const map = new TomTomMap(
  { container: "map" },
  { style: { type: "published", include: ["trafficFlow"] } }
);
```

### Advanced Traffic Flow Control

For granular control over traffic flow behavior, import and initialize the TrafficFlowModule:

```javascript
import { TrafficFlowModule } from "@cet/maps-sdk-js/map";

const traffic = await TrafficFlowModule.get(map);
```

### Module Initialization with Configuration

Configure the module during initialization to set up specific behaviors:

```javascript
const traffic = await TrafficFlowModule.get(map, {
    visible: false,
    filters: {
        any: [{ roadCategories: { show: "only", values: ["motorway", "trunk"] } }]
    }
});
```

# Configuring the Traffic Flow Module

The Traffic Flow Module provides flexible configuration options that can be applied during initialization or modified at runtime. All configuration changes are applied seamlessly without requiring map reloads, ensuring smooth user experience.

## Configuration Methods

### Runtime Configuration with applyConfig

Modify traffic flow settings dynamically while the module is active:

```javascript
const flow = await TrafficFlowModule.get(map);

// Update configuration without affecting other settings
flow.applyConfig({
    visible: true,
    filters: {
        any: [{ roadCategories: { show: "only", values: ["primary"] } }]
    }
});
```

### Dedicated Configuration Methods

Use specific methods for common configuration changes:

```javascript
const flow = await TrafficFlowModule.get(map);

// Toggle visibility
flow.setVisible(false);

// Apply filtering
flow.filter({
    any: [{ roadCategories: { show: "only", values: ["motorway"] } }]
});
```

### Configuration Reset

Reset all module settings to their default values:

```javascript
// Resets visibility to true and removes all filters
flow.resetConfig();
```

## Traffic Flow Visibility Control

Traffic flow visibility can be controlled programmatically to create responsive user interfaces or integrate with other map features. This is particularly useful for applications that need to toggle traffic information based on user preferences or contextual requirements.

**Visibility Control Methods:**
- [`setVisible`](/javascript/maps/documentation/api-reference/map-traffic.TrafficFlowModule#setVisible) method for direct visibility control
- `visible` property in configuration objects for batch updates

```javascript
// Direct visibility control
const flow = await TrafficFlowModule.get(map, { visible: false });
flow.setVisible(true);

// Configuration-based visibility
flow.applyConfig({ visible: false });
```

**Practical Applications:**
- **User preference toggles** allowing users to show/hide traffic information
- **Context-sensitive display** hiding traffic when showing other detailed information
- **Performance optimization** reducing rendering load when traffic data isn't needed

## Advanced Traffic Flow Filtering

Traffic flow filtering provides sophisticated control over which types of traffic information are displayed. This feature enables applications to focus on specific road types, traffic conditions, or geographic criteria based on user needs or application context.

### Road Category Filtering

Filter traffic flow by road type to focus on specific transportation networks:

```javascript
// Show only highway traffic
flow.filter({
    any: [{
        roadCategories: {
            show: "only",
            values: ["motorway", "trunk"]
        }
    }]
});

// Hide local streets, show major roads
flow.filter({
    any: [{
        roadCategories: {
            show: "except",
            values: ["street"]
        }
    }]
});
```

**Available Road Categories:**
- **motorway**: High-speed highways and freeways
- **trunk**: Major intercity roads and expressways
- **primary**: Important regional roads and major arterials
- **secondary**: Secondary roads connecting towns and districts
- **tertiary**: Local connector roads and minor arterials
- **street**: Local streets and neighborhood roads

### Road Sub-Category Filtering

For more granular control, filter by specific road sub-categories:

```javascript
// Focus on major local roads within tertiary category
flow.filter({
    any: [{
        roadSubCategories: {
            show: "only",
            values: ["major_local"]
        }
    }]
});
```

**Sub-Category Options:**
- **Tertiary roads**: `"connecting"`, `"major_local"`
- **Street roads**: `"local"`, `"minor_local"`

### Road Closure Filtering

Control the display of road closures to highlight or hide blocked routes:

```javascript
// Show only road closures
flow.filter({
    any: [{
        showRoadClosures: "only"
    }]
});

// Hide road closures, show flowing traffic only
flow.filter({
    any: [{
        showRoadClosures: "except"
    }]
});
```

This filtering is particularly valuable for:
- **Emergency response** applications focusing on available routes
- **Navigation systems** that need to highlight blocked paths
- **Traffic analysis** tools examining closure impact on traffic flow

### Complex Filter Combinations

Create sophisticated filtering logic by combining multiple criteria:

```javascript
// Show major roads OR any roads with closures
flow.filter({
    any: [
        {
            roadCategories: {
                show: "only",
                values: ["motorway", "trunk", "primary"]
            }
        },
        {
            showRoadClosures: "only"
        }
    ]
});
```

### Multiple Filter Scenarios

Apply different filter sets for various application states:

```javascript
// Urban navigation mode - focus on major arterials
const urbanFilters = {
    any: [{
        roadCategories: {
            show: "only",
            values: ["primary", "secondary", "tertiary"]
        }
    }]
};

// Highway mode - show only major highways
const highwayFilters = {
    any: [{
        roadCategories: {
            show: "only",
            values: ["motorway", "trunk"]
        }
    }]
};

// Apply based on navigation context
if (navigationMode === 'urban') {
    flow.filter(urbanFilters);
} else if (navigationMode === 'highway') {
    flow.filter(highwayFilters);
}
```

## Event Handling

The Traffic Flow Module provides event handling capabilities for interactive traffic flow applications:

```javascript
const flow = await TrafficFlowModule.get(map);

// Handle traffic flow interactions
flow.events.on('click', (feature, lngLat) => {
    console.log('Traffic flow clicked:', feature.properties);
    displayTrafficFlowDetails({
        roadCategory: feature.properties.road_category,
        currentSpeed: feature.properties.current_speed,
        freeFlowSpeed: feature.properties.free_flow_speed,
        location: lngLat
    });
});

// Handle hover events for quick information
flow.events.on('hover', (feature, lngLat) => {
    showTrafficSpeedTooltip(feature.properties, lngLat);
});
```

For complete traffic flow implementation examples and advanced filtering patterns, go to http://docs.tomtom.com/maps-sdk-js/examples.
