---
title: User Events
hideMenu: false
hideSubmenu: false
hasTwoColumns: false
titleTags:
- label: "VERSION 0.9.3"
  color: "grey5"
- label: "PRIVATE PREVIEW"
  color: "grey5"
---

# User Events Overview

The User Events system in the TomTom Maps SDK provides enhanced event handling capabilities that build upon MapLibre's native events. This system simplifies complex user interactions and provides consistent event handling across different map elements and modules, enabling rich interactive mapping experiences.

## Event System Architecture

The TomTom SDK's event system addresses common MapLibre event handling challenges while maintaining full compatibility with the underlying MapLibre event infrastructure. This dual-layer approach provides both familiar MapLibre patterns and enhanced TomTom-specific functionality.

### Enhanced Event Capabilities

**Problems Solved by TomTom Events:**
- **Complex hover implementation**: MapLibre hover events require manual timing, state management, and precision handling
- **Event conflicts**: Multiple interactive sources can interfere with each other without proper coordination
- **Data transformation**: Raw MapLibre events need conversion to application-specific formats with relevant context
- **Precision issues**: Accurate event detection with appropriate tolerance is difficult to implement consistently

**TomTom SDK Solutions:**
- **Unified event API**: Consistent event handling patterns across all SDK modules through dedicated `events` objects
- **Built-in hover support**: Automatic hover detection with configurable delays, thresholds, and state management
- **Conflict resolution**: Smart event routing between different map modules and layers prevents interference
- **Rich data integration**: Events include relevant TomTom data and contextual information automatically

### Module-Specific Event Systems

Each TomTom module provides its own dedicated event system through an `events` object, eliminating the need to work directly with MapLibre events for module-specific interactions:

```javascript
import { PlacesModule, TrafficIncidentsModule, RoutesModule } from '@cet/maps-sdk-js/map';

// Each module exposes its own events object
const placesModule = await PlacesModule.get(map);
const trafficModule = await TrafficIncidentsModule.get(map);
const routesModule = await RoutesModule.get(map);

// Access module-specific events through the events object
placesModule.events.on('click', handlePlaceClick);
trafficModule.events.on('hover', handleTrafficHover);
routesModule.events.on('click', handleRouteClick);
```

## Basic Event Handling

### Standard MapLibre Event Integration

The SDK maintains full compatibility with MapLibre events for general map interactions:

```javascript
import { TomTomMap } from '@cet/maps-sdk-js/map';

const map = new TomTomMap({ container: 'map' });

// Standard MapLibre events for general map interaction
map.getMaplibreMap().on('click', (event) => {
    console.log('Map clicked at:', event.lngLat);
});

map.getMaplibreMap().on('moveend', () => {
    const bounds = map.getMaplibreMap().getBounds();
    console.log('New map bounds:', bounds);
});
```

## TomTom Module Event Handling

### Places Module Events

The Places Module provides rich event handling for place interactions through its dedicated events system:

```javascript
import { PlacesModule } from '@cet/maps-sdk-js/map';

const placesModule = await PlacesModule.get(map);

// Use the module's events object for TomTom-specific interactions
placesModule.events.on('click', (feature, lngLat) => {
    console.log('Place clicked:', feature.properties.name);
    console.log('Click coordinates:', lngLat);
    displayPlaceDetails(feature.properties);
});

placesModule.events.on('hover', (feature, lngLat) => {
    console.log('Place hovered:', feature.properties.name);
    showPlacePreview(feature.properties);
});
```

### Traffic Module Events

Traffic incidents and flow data provide specialized event handling for traffic-related interactions:

```javascript
import { TrafficIncidentsModule } from '@cet/maps-sdk-js/map';

const trafficModule = await TrafficIncidentsModule.get(map);

// Traffic-specific events with enriched data
trafficModule.events.on('click', (feature, lngLat) => {
    displayTrafficIncident({
        type: feature.properties.type,
        severity: feature.properties.severity,
        description: feature.properties.description,
        delay: feature.properties.delay,
        location: lngLat
    });
});

trafficModule.events.on('long-hover', (feature, lngLat) => {
    showTrafficTooltip(feature.properties, lngLat);
});
```

### Routes Module Events

Route interactions provide detailed information about route segments and waypoints:

```javascript
import { RoutesModule } from '@cet/maps-sdk-js/map';

const routesModule = await RoutesModule.get(map);

routesModule.events.on('click', (feature, lngLat) => {
    console.log('Route clicked:', feature.properties.routeId);
    console.log('Route segment:', feature.properties.segmentIndex);
    showRouteDetails(feature.properties);
});
```

## Advanced Event Types

### Hover Events

The SDK introduces sophisticated hover detection that addresses the complexity of implementing reliable hover functionality with MapLibre. Traditional hover implementation requires managing mouse enter/leave events, dealing with timing issues, and handling state management across different map features.

**Hover Event Challenges:**
- **Timing complexity**: Raw mouse events require debouncing and timing management
- **State management**: Tracking which features are currently hovered requires careful state handling
- **Performance concerns**: Frequent mouse events can impact application performance
- **Cross-layer conflicts**: Multiple interactive layers can interfere with hover detection

**TomTom Hover Solutions:**
The SDK provides automatic hover detection with built-in timing, state management, and performance optimization:

```javascript
// Standard hover: Immediate response to mouse enter
placesModule.events.on('hover', (feature, lngLat) => {
    showQuickPreview(feature.properties);
});

// Hover end: Automatic cleanup when mouse leaves
placesModule.events.on('hover-end', (feature, lngLat) => {
    hideQuickPreview();
});
```

### Long-Hover Events

Long-hover events are particularly valuable for displaying detailed information without cluttering the interface with immediate popups. This pattern is ideal for progressive disclosure interfaces where users can get quick information by hovering briefly, or detailed information by maintaining hover focus.

**Long-Hover Implementation Benefits:**
- **Prevents accidental triggers**: Users must maintain focus for a specified duration
- **Reduces UI noise**: Detailed information appears only when users demonstrate intent
- **Improves performance**: Expensive operations (like API calls) are triggered only after sustained interest
- **Enhanced UX**: Creates a natural progression from quick glance to detailed exploration

**Configurable Long-Hover Timing:**
The long-hover delay is configurable to match your application's UX requirements:

```javascript
// Long hover with default timing (typically 800ms)
trafficModule.events.on('long-hover', (feature, lngLat) => {
    fetchDetailedTrafficInfo(feature.properties.incidentId)
        .then(details => showDetailedIncident(details, lngLat));
});

// Long hover end: Cleanup when user moves away before completion
trafficModule.events.on('long-hover-end', (feature, lngLat) => {
    cancelDetailedInfoFetch();
    hideDetailedIncident();
});
```

### Event Timing and Configuration

Different modules may have different timing requirements based on the type of interaction and data complexity:

```javascript
// Configure hover timing for different interaction types
const quickResponseModules = [placesModule]; // Fast hover for places
const detailedInfoModules = [trafficModule]; // Longer hover for complex data

// Example of how timing might vary by module type
// (Note: Actual configuration methods may vary by implementation)
trafficModule.events.on('long-hover', (feature, lngLat) => {
    // Triggered after longer delay for complex traffic data
    displayComprehensiveTrafficAnalysis(feature.properties);
});

placesModule.events.on('hover', (feature, lngLat) => {
    // Triggered quickly for simple place information
    showPlaceBasicInfo(feature.properties);
});
```

## Event Data Structure

### Enhanced Event Payloads

TomTom module events provide enriched data compared to raw MapLibre events:

```javascript
placesModule.events.on('click', (feature, lngLat, eventContext) => {
    // feature: GeoJSON feature with TomTom-specific properties
    console.log('Feature data:', feature.properties);

    // lngLat: Precise click coordinates
    console.log('Click location:', lngLat);

    // eventContext: Additional context and metadata
    console.log('Event metadata:', eventContext);
});
```

### Working with Event Features

Event features follow the GeoJSON specification but include TomTom-specific property enhancements:

```javascript
trafficModule.events.on('click', (feature, lngLat) => {
    const props = feature.properties;

    // Access TomTom-specific traffic properties
    const incidentInfo = {
        id: props.incidentId,
        type: props.type,
        severity: props.severity,
        description: props.description,
        delay: props.delay,
        startTime: props.startTime,
        endTime: props.endTime,
        affectedRoads: props.affectedRoads
    };

    displayTrafficIncident(incidentInfo, lngLat);
});
```

## Event Integration Patterns

### Service Integration with Events

Combine module events with TomTom services for comprehensive location intelligence:

```javascript
import { search, reverseGeocode } from '@cet/maps-sdk-js/services';

placesModule.events.on('click', async (feature, lngLat) => {
    try {
        // Get additional context for the clicked location
        const [addressInfo, nearbyPlaces] = await Promise.all([
            reverseGeocode({ position: [lngLat.lng, lngLat.lat] }),
            search({
                query: feature.properties.category,
                position: [lngLat.lng, lngLat.lat],
                radius: 500
            })
        ]);

        displayEnrichedPlaceInfo({
            place: feature.properties,
            address: addressInfo.features[0]?.properties.address,
            nearby: nearbyPlaces.results
        });
    } catch (error) {
        console.error('Failed to enrich place data:', error);
    }
});
```

For complete event handling examples and advanced interaction patterns, go to http://docs.tomtom.com/maps-sdk-js/examples.
